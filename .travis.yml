language: cpp

sudo: required

compiler: gcc

before_install:
  - sudo apt-get install -y build-essential gfortran environment-modules
  - sudo apt-get install -y --reinstall ca-certificates
  - sudo update-ca-certificates -f
  - git clone https://github.com/spack/spack.git /tmp/spack
  - export SPACK_ROOT=/tmp/spack
  - source $SPACK_ROOT/share/spack/setup-env.sh
  - git clone https://github.com/f-sim/spack-packages.git /tmp/spack-packages
  - spack repo add /tmp/spack-packages

script:
  - mkdir build
  - cd build
  - spack setup flowing@master
